 <!DOCTYPE html>
<html lang="sp">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://kit.fontawesome.com/8b8b86760e.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
	<link rel="stylesheet" href="./styles.css">
	<title>Dashboard page</title>
</head>
<body onload="trigger()">
	<%- include('../components/navbarteacher'); %>
	<div id="showing-section">
		<div>
			<p>choose any student of your class to check either their grades or to update them as well</p>
			<div id="student-info">
				<select class="selectedValue">
					<option value="none"></option>	
				<% for (let index = 0; index < listStudents.length; index++) {%> 
					<option class="chosenValue" value= '<%= listStudents[index]["name_student"] %> <%= listStudents[index]["lastname_student"] %>'><%= listStudents[index]["name_student"] %> <%= listStudents[index]["lastname_student"] %></option>
				<% } %>
				</select>										
			</div>
			<div>
				<% if( gradesPerStudent.length > 0 ) {%>
					<% gradesPerStudent.forEach((user, index)=> { %>
						<div class="grade <%= user.name %> <%= user.lastname %>" id="<%= index %>">
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.name %> <%= user.lastname %></span>
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.grade1 %> </span>
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.grade2 %></span>
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.grade3 %> </span>
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.gradePerformance1 %> </span>
							<span hidden class="<%= user.name %> <%= user.lastname %>"><%= user.gradePerformance2 %></span>
						</div>	
						<% }); %>
						
				<% }%>	
				<form action="changegrades" method="post">
					
				</form>
			</div>
		</div>
	</div>
	<%-	include('../components/footer'); %>
<script src="./attached_teachers.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="./socket.js" ></script>
<script>
	let chosenStudent = document.querySelector(".selectedValue")
	let form = document.querySelector("form")
	let item = document.querySelectorAll(".grade")

	chosenStudent.addEventListener('change', function(e){
		form.innerHTML = ""
		for (let index = 0; index < item.length; index++) {
			console.log(item[index])
			if (e.target.value == item[index].firstElementChild.textContent) {
				console.log("coincide")
				var str = "<div>\
				<span>" + item[index].children[0].textContent + "</span>\
				<span>" + item[index].children[1].textContent+ "</span>\
				<span>" + item[index].children[2].textContent+ "</span>\
				<span>" + item[index].children[3].textContent+ "</span>\
				<span>" + item[index].children[4].textContent+ "</span>\
				</div>"
				form.innerHTML += str
			}	
		}
	
	}) 
	// console.log(item[0].firstElementChild.textContent) 


</script>
</html>